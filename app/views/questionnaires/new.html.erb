<h1>アンケート作成ページ</h1>
<section>
</section>
<%# TODO: 戻るボタンではquestionやchoiceを全削除 --> 勝手にされるのだろうか？？もしくはされなくても明示的に削除すべき？？ %>
<%# TODO: ほぞんボタンで保存 %>
<%# TODO: questionnaire作成ページに飛んだ時点でquestionnaireレコードを作成 %>
<article class="questionnaire">
  <div id="questions-wrap">
    <div id="question-field-wrap"></div>
  </div>
  <hr>
  <div id="category-select-wrap">
    <p>質問追加</p>
    <select id="category-select" name="category">
      <option value="input">input</option>
      <option value="textarea">textarea</option>
      <option value="select">select</option>
      <option value="checkbox">checkbox</option>
      <option value="radio">radio</option>
    </select>
    <button type="button" id="category-btn">質問追加</button>
  </div>
</article>
<script type="text/javascript">

  const wrap = $('#category-select-wrap'),
      question_wrap = $('#question-field-wrap');
  $('#category-select').change(() => {
      const category = $("#category-select").val(),
          numChoice_field = $('#numChoice');
      if (category == 'checkbox' || category == 'radio' || category == 'select') {
          numChoice_field.length || $('#category-select').after('<input type="text" id="numChoice" placeholder="選択肢の個数">')
      } else {
          numChoice_field.length && numChoice_field.remove();
      }
  });

  $('#category-btn').on('click', () => {
    const category = $("#category-select").val(),
        numChoice = $('#numChoice').val();
    question_wrap.append('<%= render partial: "question", locals: {questionnaire: @questionnaire} %>');
  });

</script>
